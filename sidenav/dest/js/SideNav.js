!function(e){"function"==typeof define&&define.amd?define(["jquery","TweenMax"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery,TweenMax)}(function(e,t){var i=function(i){function s(e,t,i){t=t+"s "+i,e.css({"-webkit-transition":t,transition:t})}function a(){s(f,.3,"cubic-bezier(0.44,0.09,0.29,1)"),s(d,.5,"cubic-bezier(0.72,-0.21,0.17,1)")}var n={menu:["part1","part2","part3","part4"],themeColor:"#dc1e24",txtColor:"#fff",position:"right"};e.extend(n,i);var o=this,c=e("#"+n.id);c.append('<article class="km-side-navi-outer"><div class="km-name-tag"><figure class="km-bg"></figure><ul></ul></div><ul class="km-side-navi-ul"></ul></article>');var l=c.find(".km-side-navi-outer"),r=c.find(".km-side-navi-ul"),u=r.find("li"),f=(u.find(".km-semi-circle"),u.find("span.km-circle"),c.find(".km-name-tag")),d=f.find("ul"),m=f.find(".km-bg"),p=[],v=32;this.crtID=-1,this.menu=[],c.css(n.position,"2%"),t.to(c,1,{opacity:1}),t.set(m,{css:{"background-color":n.themeColor}}),this.init=function(e){for(var t in n.menu)console.log(t),o.appendMenu(n.menu[t],100*t+1e3*e*.01,parseInt(t)+1)},this.appendMenu=function(i,s,a){var c=e("<li>"+i+"</li>").appendTo(d);c.css("color",n.txtColor),p[a]={li:c,offsetX:c.offset().left-l.offset().left,width:c.outerWidth()};var m=e("<li></li>"),h=e('<div class="km-hiddenBtn"></div>'),g=e('<span class="km-circle"></span>'),y=e('<div class="km-semi-circle"></div>');t.set(u,{transformPerspective:1e3}),t.set(y,{css:{"background-color":n.themeColor}}),"left"===n.position?t.set(y,{css:{transform:"rotate(40deg)"}}):t.set(y,{css:{transform:"rotate(-40deg)"}}),this.menu[a]={name:i,li:m,circle:g,id:a,lime:y,offsetY:0},t.set([g,y],{scale:0,opacity:0}),g.appendTo(m),y.appendTo(m),h.appendTo(m),t.set(f,{y:v-8}),setTimeout(function(){m.appendTo(r),t.to(m,2,{minHeight:16,paddingTop:8,paddingBottom:8,ease:Elastic.easeOut}),t.to(y,1,{scale:1,opacity:1,ease:Elastic.easeOut}),t.to(y,.5,{delay:.6,scale:0,opacity:0,ease:Elastic.easeOut}),t.to(g,2,{delay:.5,scale:1,opacity:1,ease:Elastic.easeOut}),m.on("mouseover",function(){o.activeMenu(a),o.moveTag(a)}),m.on("mouseout",function(){o.activeMenu(o.crtID),o.moveTag(-1)})},s)},this.activeOn=function(e,i){t.to(e,2,{scale:1,opacity:1,ease:Elastic.easeOut}),t.to(i,1,{scale:0,opacity:0,ease:Elastic.easeOut})},this.activeOff=function(e,i){t.to(e,1,{scale:0,opacity:0,ease:Elastic.easeOut}),t.to(i,2,{scale:1,opacity:1,ease:Elastic.easeOut})},this.moveTag=function(e){if(clearTimeout(h),-1==e)"left"===n.position?t.set(f,{left:40,width:0}):t.set(f,{right:40,width:0});else{var i=-p[e].offsetX;"left"===n.position?t.set(f,{left:50,y:32*e,width:p[e].width}):t.set(f,{right:50,y:32*e,width:p[e].width}),t.set(d,{x:i})}},this.activeMenu=function(e){for(var t in o.menu){var i=o.menu[t];t==e?this.activeOn(i.lime,i.circle):this.activeOff(i.lime,i.circle)}},this.menuChange=function(e){o.crtID=e,o.activeMenu(e)};var h=null;this.tagViewMoment=function(e){this.moveTag(e),clearTimeout(h),h=setTimeout(function(){o.moveTag(-1),h=null},900)},a.call(this),this.init(1)};return window.SideNavi=i,i});